{% extends "base.html" %}
{% block content %}
<div class="card">
    <div class="card-header">
        <h2>üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Å –∫–∞—Ä—Ç—ã</h2>
    </div>

    <form method="POST">
        <label>–°—É–º–º–∞ (‚ÇΩ):</label>
        <input type="number" name="amount" min="1" max="10000" step="0.01" placeholder="500.00" required>

        <label>–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã:</label>
        <input type="text" name="card_number" placeholder="4242 4242 4242 4242" maxlength="19" required
               oninput="this.value = this.value.replace(/[^0-9\s]/g, '').replace(/\s+/g, ' ')">

        <label>–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–ú–ú/–ì–ì):</label>
        <input type="text" name="expiry" placeholder="12/25" maxlength="5" required
               oninput="this.value = this.value.replace(/[^0-9\/]/g, '')">

        <label>CVV (3 —Ü–∏—Ñ—Ä—ã):</label>
        <input type="password" name="cvv" placeholder="123" maxlength="3" required
               oninput="this.value = this.value.replace(/[^0-9]/g, '')">

        <button type="submit">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
    </form>
</div>

<script>
document.querySelector('input[name="card_number"]').addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, '');
    let formatted = '';
    for (let i = 0; i < value.length; i++) {
        if (i > 0 && i % 4 === 0) formatted += ' ';
        formatted += value[i];
    }
    e.target.value = formatted.substring(0, 19);
});

document.querySelector('input[name="expiry"]').addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, '');
    if (value.length >= 2) {
        e.target.value = value.substring(0, 2) + '/' + value.substring(2, 4);
    }
});
</script>
{% endblock %}